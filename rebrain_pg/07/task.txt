1. На обоих серверах установить postgresql 11 через пакетный менеджер.
2. На publisher:
- Создать роль car_portal_app.
- Разрешить безусловную аутентификацию клиентов в файле pg_hba.conf для роли из п.1 с подключением для любых адресов (0.0.0.0/0).
- В файле postgresql.conf разрешить все имеющиеся IP-интерфейсы.
- Присвоить конфигурационному параметру wal_level соответствующее значение для подписчика.
- Перезапустить postgres.
- Восстановить прилагаемую схему schema.sql пользователем postgres и дамп с базой данных data.sql под ролью car_portal_app из каталога /opt.
- Добавить роль REPLICATION для роли (пользователя) car_portal_app.
- Создать публикацию для восстановленной бд из дампа data.sql для всех таблиц.
3. На subscriber:
- Создать роль car_portal_app.
- Разрешить безусловную аутентификацию клиентов в файле pg_hba.conf для роли из п.1 с подключением для любых адресов.
- В файле postgresql.conf разрешить все имеющиеся IP-интерфейсы.
- Перезапустить postgres.
- Перенести с сервера publisher schema.sql в каталог /opt.
- Восстановить схему schema.sql из каталога /opt.
- На publisher найти восстановленную бд и создать подписку на эту бд.
4. На publisher:
- Добавить запись в таблицу account для соответствующей схемы, которую прочтете в data.sql, содержащую first_name : Rebrain, last_name : me, email : info@rebrainme.com, password : md5('info@rebrainme.com'). После чего убедитесь, что информация попала на сервер subscriber.
5. Если уверены, что все сделали правильно, отправляйте задание на проверку.
